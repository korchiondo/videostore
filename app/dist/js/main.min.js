"use strict";angular.module("Authentication",[]),angular.module("Home",[]),angular.module("VideoCatalog",["Authentication","Home","ngRoute","ngCookies"]).config(["$routeProvider",function(e){e.when("/login",{controller:"LoginController",templateUrl:"modules/auth/views/login.html",hideMenus:!0}).when("/",{controller:"HomeController",templateUrl:"modules/home/views/home.html"}).otherwise({redirectTo:"/login"})}]).run(["$rootScope","$location","$cookieStore","$http",function(e,o,t,r){e.globals=t.get("globals")||{},e.globals.currentUser&&(r.defaults.headers.common.Authorization="Basic "+e.globals.currentUser.authdata),e.$on("$locationChangeStart",function(t,r,n){"/login"===o.path()||e.globals.currentUser||o.path("/login")})}]),angular.module("Authentication").controller("LoginController",["$scope","$rootScope","$location","AuthenticationService",function(e,o,t,r){r.ClearCredentials(),e.login=function(){e.dataLoading=!0,r.Login(e.username,e.password,function(o){o.success?(r.SetCredentials(e.username,e.password),t.path("/")):(e.error=o.message,e.dataLoading=!1)})}}]),angular.module("Authentication").factory("AuthenticationService",["Base64","$http","$cookieStore","$rootScope","$timeout",function(e,o,t,r,n){var a={};return a.Login=function(e,o,t){n(function(){var r={success:"test"===e&&"test"===o};r.success||(r.message="Username or password is incorrect"),t(r)},1e3)},a.SetCredentials=function(n,a){var i=e.encode(n+":"+a);r.globals={currentUser:{username:n,authdata:i}},o.defaults.headers.common.Authorization="Basic "+i,t.put("globals",r.globals)},a.ClearCredentials=function(){r.globals={},t.remove("globals"),o.defaults.headers.common.Authorization="Basic "},a}]).factory("Base64",function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(o){var t,r,n,a,i,l="",c="",s="",u=0;do t=o.charCodeAt(u++),r=o.charCodeAt(u++),c=o.charCodeAt(u++),n=t>>2,a=(3&t)<<4|r>>4,i=(15&r)<<2|c>>6,s=63&c,isNaN(r)?i=s=64:isNaN(c)&&(s=64),l=l+e.charAt(n)+e.charAt(a)+e.charAt(i)+e.charAt(s),t=r=c="",n=a=i=s="";while(u<o.length);return l},decode:function(o){var t,r,n,a,i,l="",c="",s="",u=0,d=/[^A-Za-z0-9\+\/\=]/g;d.exec(o)&&window.alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),o=o.replace(/[^A-Za-z0-9\+\/\=]/g,"");do n=e.indexOf(o.charAt(u++)),a=e.indexOf(o.charAt(u++)),i=e.indexOf(o.charAt(u++)),s=e.indexOf(o.charAt(u++)),t=n<<2|a>>4,r=(15&a)<<4|i>>2,c=(3&i)<<6|s,l+=String.fromCharCode(t),64!=i&&(l+=String.fromCharCode(r)),64!=s&&(l+=String.fromCharCode(c)),t=r=c="",n=a=i=s="";while(u<o.length);return l}}}),angular.module("Home").controller("HomeController",["$scope",function(e){}]);